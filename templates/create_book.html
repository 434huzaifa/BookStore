{% include 'base.html' %}

{% block title %}
<title>Create Book</title>
{% endblock title %}
{% block body %}
<div class="container">
    <form>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Title</label>
            <input type="text" name="title" class="form-control" id="exampleFormControlInput1" maxlength="100">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Author</label>
            <input type="text" name="author" class="form-control" id="exampleFormControlInput1" max="50">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label">Synopsis</label>
            <textarea class="form-control" name="synopsis" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">ISBN</label>
            <input type="number" name="isbn" class="form-control" id="exampleFormControlInput1">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Price</label>
            <input type="number" name="price" class="form-control" id="exampleFormControlInput1">
        </div>

        <input id="form_button" class="btn btn-outline-primary btn-lg" style="margin-top: 20px;" type="submit"
            value="submit">
    </form>
    <script>
        function handleSubmit(event) {
            event.preventDefault();

            event.preventDefault();

            const data = new FormData(event.target);

            const value = Object.fromEntries(data.entries());
            var deta = JSON.stringify(value)
            deta=JSON.parse(deta)
            var baseURL="http://127.0.0.1:8000/api/create-book/"
            console.log(deta)
            $.post(baseURL,deta,function(data,status){
                console.log(data,status)
            })
        }

        const form = document.querySelector('form');
        form.addEventListener('submit', handleSubmit);

    </script>
</div>
{% endblock body %}